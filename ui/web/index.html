<!DOCTYPE html>
<html lang="en" x-data="app()">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrainSAIT LINC Agents</title>
    <link rel="stylesheet" href="./css/main.css">
    <script defer src="./js/alpine.min.js"></script>
</head>
<body class="bg-gray-50">
    <div id="app" class="min-h-screen">
        <!-- Navigation Header -->
        <header class="bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg">
            <div class="container mx-auto px-4 py-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold">üß† BrainSAIT LINC</h1>
                        <p class="text-blue-100 mt-1">Intelligent Healthcare AI Agent Platform</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 rounded-full" :class="systemHealthy ? 'bg-green-400 animate-pulse' : 'bg-red-400'"></div>
                            <span class="text-sm" x-text="systemHealthy ? 'System Online' : 'System Issues'"></span>
                        </div>
                        <button @click="currentView = 'dashboard'" 
                                :class="currentView === 'dashboard' ? 'bg-white/20' : 'hover:bg-white/10'"
                                class="px-4 py-2 rounded-lg transition-colors">
                            üìä Dashboard
                        </button>
                        <button @click="currentView = 'chat'" 
                                :class="currentView === 'chat' ? 'bg-white/20' : 'hover:bg-white/10'"
                                class="px-4 py-2 rounded-lg transition-colors">
                            üí¨ Chat Interface
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard View -->
        <div x-show="currentView === 'dashboard'" class="container mx-auto p-6">
            <!-- System Status Cards -->
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">üîç System Status</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-xl shadow-sm p-6 border">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Active Agents</p>
                                <p class="text-2xl font-bold text-green-600" x-text="onlineAgents.length"></p>
                            </div>
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <span class="text-green-600 text-xl">‚ö°</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-sm p-6 border">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Total Requests</p>
                                <p class="text-2xl font-bold text-blue-600" x-text="totalRequests"></p>
                            </div>
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="text-blue-600 text-xl">üìà</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-sm p-6 border">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Response Time</p>
                                <p class="text-2xl font-bold text-purple-600" x-text="avgResponseTime + 'ms'"></p>
                            </div>
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <span class="text-purple-600 text-xl">‚ö°</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Categories -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Healthcare Agents -->
                <div class="bg-white rounded-xl shadow-sm border">
                    <div class="bg-gradient-to-r from-green-500 to-emerald-500 text-white p-6 rounded-t-xl">
                        <h3 class="text-xl font-semibold flex items-center">
                            üè• Healthcare Agents
                        </h3>
                        <p class="text-green-100 text-sm mt-1">Medical care and patient support</p>
                    </div>
                    <div class="p-6">
                        <template x-for="agent in agents.filter(a => a.category === 'healthcare')" :key="agent.id">
                            <div class="agent-card mb-4 last:mb-0 cursor-pointer hover:scale-105 transition-transform"
                                 @click="selectAgent(agent)">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">
                                            <span x-text="agent.icon" class="text-lg"></span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800" x-text="agent.name"></h4>
                                            <p class="text-sm text-gray-600" x-text="agent.description"></p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 rounded-full" 
                                             :class="agent.status === 'online' ? 'bg-green-400' : 'bg-red-400'"></div>
                                        <span class="text-xs text-gray-500" x-text="'Port: ' + agent.port"></span>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Business Agents -->
                <div class="bg-white rounded-xl shadow-sm border">
                    <div class="bg-gradient-to-r from-blue-500 to-cyan-500 text-white p-6 rounded-t-xl">
                        <h3 class="text-xl font-semibold flex items-center">
                            üíº Business Agents
                        </h3>
                        <p class="text-blue-100 text-sm mt-1">Operations and analytics</p>
                    </div>
                    <div class="p-6">
                        <template x-for="agent in agents.filter(a => a.category === 'business')" :key="agent.id">
                            <div class="agent-card mb-4 last:mb-0 cursor-pointer hover:scale-105 transition-transform"
                                 @click="selectAgent(agent)">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">
                                            <span x-text="agent.icon" class="text-lg"></span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800" x-text="agent.name"></h4>
                                            <p class="text-sm text-gray-600" x-text="agent.description"></p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 rounded-full" 
                                             :class="agent.status === 'online' ? 'bg-green-400' : 'bg-red-400'"></div>
                                        <span class="text-xs text-gray-500" x-text="'Port: ' + agent.port"></span>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Development Agents -->
                <div class="bg-white rounded-xl shadow-sm border">
                    <div class="bg-gradient-to-r from-purple-500 to-indigo-500 text-white p-6 rounded-t-xl">
                        <h3 class="text-xl font-semibold flex items-center">
                            üöÄ Development & Automation
                        </h3>
                        <p class="text-purple-100 text-sm mt-1">Code and process automation</p>
                    </div>
                    <div class="p-6">
                        <template x-for="agent in agents.filter(a => a.category === 'development')" :key="agent.id">
                            <div class="agent-card mb-4 last:mb-0 cursor-pointer hover:scale-105 transition-transform"
                                 @click="selectAgent(agent)">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center">
                                            <span x-text="agent.icon" class="text-lg"></span>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-gray-800" x-text="agent.name"></h4>
                                            <p class="text-sm text-gray-600" x-text="agent.description"></p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 rounded-full" 
                                             :class="agent.status === 'online' ? 'bg-green-400' : 'bg-red-400'"></div>
                                        <span class="text-xs text-gray-500" x-text="'Port: ' + agent.port"></span>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Interface View -->
        <div x-show="currentView === 'chat'" class="container mx-auto p-6">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-[calc(100vh-8rem)]">
                <!-- Agent Selector Sidebar -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-xl shadow-sm border h-full">
                        <div class="p-4 border-b">
                            <h3 class="font-semibold text-gray-800">Select Agent</h3>
                            <p class="text-sm text-gray-600">Choose an agent to chat with</p>
                        </div>
                        <div class="p-4 space-y-2 overflow-y-auto">
                            <template x-for="agent in agents.filter(a => a.status === 'online')" :key="agent.id">
                                <button @click="selectedAgent = agent; messages = []"
                                        :class="selectedAgent?.id === agent.id ? 'bg-blue-50 border-blue-200' : 'hover:bg-gray-50'"
                                        class="w-full text-left p-3 rounded-lg border transition-colors">
                                    <div class="flex items-center space-x-3">
                                        <span x-text="agent.icon" class="text-lg"></span>
                                        <div class="flex-1 min-w-0">
                                            <p class="font-medium text-gray-800 truncate" x-text="agent.name"></p>
                                            <p class="text-xs text-gray-600 truncate" x-text="agent.description"></p>
                                        </div>
                                        <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                    </div>
                                </button>
                            </template>
                        </div>
                    </div>
                </div>

                <!-- Chat Interface -->
                <div class="lg:col-span-3">
                    <div class="bg-white rounded-xl shadow-sm border h-full flex flex-col">
                        <!-- Chat Header -->
                        <div class="p-4 border-b flex items-center justify-between">
                            <div class="flex items-center space-x-3" x-show="selectedAgent">
                                <span x-text="selectedAgent?.icon" class="text-2xl"></span>
                                <div>
                                    <h3 class="font-semibold text-gray-800" x-text="selectedAgent?.name"></h3>
                                    <p class="text-sm text-gray-600" x-text="selectedAgent?.description"></p>
                                </div>
                            </div>
                            <div x-show="!selectedAgent" class="text-gray-500">
                                Select an agent to start chatting
                            </div>
                            <div x-show="selectedAgent" class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                <span class="text-sm text-gray-600">Online</span>
                            </div>
                        </div>

                        <!-- Messages Area -->
                        <div class="flex-1 overflow-y-auto p-4 space-y-4" x-ref="messagesContainer">
                            <template x-for="message in messages" :key="message.id">
                                <div class="flex" :class="message.sender === 'user' ? 'justify-end' : 'justify-start'">
                                    <div class="max-w-xs lg:max-w-md px-4 py-2 rounded-lg"
                                         :class="message.sender === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-800'">
                                        <p x-text="message.text" class="text-sm"></p>
                                        <p class="text-xs mt-1 opacity-70" x-text="message.timestamp"></p>
                                    </div>
                                </div>
                            </template>
                            <div x-show="isTyping" class="flex justify-start">
                                <div class="bg-gray-100 px-4 py-2 rounded-lg">
                                    <div class="flex space-x-1">
                                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Message Input -->
                        <div class="p-4 border-t" x-show="selectedAgent">
                            <form @submit.prevent="sendMessage" class="flex space-x-4">
                                <input type="text" x-model="currentMessage" 
                                       placeholder="Type your message..." 
                                       class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <button type="submit" 
                                        :disabled="!currentMessage.trim() || isTyping"
                                        class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                                    Send
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="./js/main.js"></script>
</body>
</html>